#[derive(Debug, Deserialize, PartialEq, Eq)]
pub struct {{name}} {
    {{#each fields}}
    {{#if (has-default-value this)}}
    #[serde(default = "{{../name}}::default_{{@key}}")]
    {{/if}}
    {{#if required}}
    pub r#{{@key}}: {{type type}},
    {{else}}
    pub r#{{@key}}: Option<{{type type}}>,
    {{/if}}
    {{/each}}
}

impl {{name}} {
    {{#each fields}}
    {{#if (has-default-value this)}}
    fn default_{{@key}}() -> {{type type}} {
        serde_json::from_str(r###"{{json default_value}}"###).expect("default json is always good")
    }
    {{/if}}
    {{/each}}
}
