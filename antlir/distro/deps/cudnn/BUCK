load("//antlir/distro/deps:rpm_library.bzl", "rpm_library")

oncall("antlir")

# Only supporting cudnn9 for now.

rpm_library(
    name = "cudnn",
    dnf_additional_repos = ["nvidia"],
    header_glob = [
        ("/usr/include", "cudnn*.h"),
    ],
    lib = "/usr/lib64/libcudnn.so",
    # So this doesn't get put into the PAR (because it's a big library)
    # provided = True,
    # cuDNN is split across two rpms, why I have no idea.
    rpm = [
        "libcudnn9-devel-cuda-12",
        "libcudnn9-headers-cuda-12",
    ],
)
