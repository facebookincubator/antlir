load("//antlir/bzl:build_defs.bzl", "rust_library")

oncall("antlir")

rust_library(
    name = "antlir2_working_volume",
    srcs = glob(["src/**/*.rs"]),
    compatible_with = [
        "ovr_config//os:freebsd",
        "ovr_config//os:linux",
        "ovr_config//os:macos",
    ],
    fb_deps = [
        "//common/rust/fbwhoami:fbwhoami",
        "//common/rust/scuba:scuba",
        "//common/rust/shed/scuba_sample:scuba_sample",
        "//common/rust/shed/fbinit:fbinit",
        "//justknobs/rust:justknobs",
    ],
    deps = [
        "nix",
        "once_cell",
        "thiserror",
        "tracing",
        "uuid",
        "//antlir/antlir2/antlir2_btrfs:antlir2_btrfs",
    ],
)
